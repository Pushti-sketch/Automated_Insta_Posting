---

# **Instagram Uploader with Music & Gemini Caption Generator 🎥🎶**

This app allows you to upload images or videos to your Instagram account with music, captions generated by **Gemini AI**, and even user mentions. You can trim Spotify tracks, add them to images or videos, and generate creative captions for your posts — all with the power of **Streamlit**!

## **✨ Features**
- **Spotify Audio Trim**: Upload a Spotify link, trim the audio, and preview the segment.
- **Add Music**: Add custom music to your Instagram posts (image or video). Select any part of the song and make it part of your post!
- **Gemini AI Caption Generator**: Automatically generates creative captions for your posts using Gemini's AI model.
- **User Mentions**: Mention specific users in your post, including group members and staff, or add custom usernames.

## **📸 Requirements**
Before you can start using this app, you'll need to install the required dependencies.

### **1. Clone the Repo**

Start by cloning this repository to your local machine.

```bash
git clone https://github.com/your-username/instagram-uploader.git
cd instagram-uploader
```

### **2. Install Dependencies**

Use the `requirements.txt` file to install the necessary Python dependencies.

```bash
pip install -r requirements.txt
```

### **3. Setup Secrets**

Streamlit uses a `secrets.toml` file to store your sensitive information like Instagram credentials and Gemini API key. Follow these steps:

1. **Create a `.streamlit/` directory** in the root of your project.
   
   ```bash
   mkdir .streamlit
   ```

2. **Create a `secrets.toml` file** inside the `.streamlit/` directory with your Instagram and Gemini API credentials.

   Example `secrets.toml`:

   ```toml
   [general]
   instagram_username = "your_instagram_username"
   instagram_password = "your_instagram_password"
   gemini_api_key = "your_gemini_api_key"
   session_file = "ig_session.pkl"
   ```

> **⚠️ Important**: Never commit your `secrets.toml` file to version control. Make sure it’s in your `.gitignore` file.

### **4. Spotify Audio Handling**

To extract audio from a Spotify URL, this app uses `yt-dlp` as a fallback method (because Spotify audio is DRM-protected). Make sure you have `yt-dlp` installed:

```bash
pip install yt-dlp
```

> **Note**: This method works by downloading the audio through YouTube links.

## **🚀 Running the App Locally**

Once everything is set up, run the Streamlit app with the following command:

```bash
streamlit run your_script.py
```

This will open the app in your default browser.

## **🛠️ How to Use the App**

1. **Login to Instagram**: Upon running the app for the first time, you'll log in to Instagram with your credentials. The session is saved, so you won’t need to log in each time (until the session expires).
   
2. **Upload a Post**:
   - Upload an **image** or **video** to be posted.
   - Choose a **Spotify link** to add music to your post.
   - **Trim** the audio to a specific time range and preview it.
   
3. **Choose Mentions**:
   - Select predefined groups (e.g., Group members, Staff members).
   - Add **custom usernames** to mention in the post.

4. **Generate Captions**:
   - **Gemini AI** will generate a creative caption for your post.
   - Alternatively, you can write your **custom caption**.

5. **Add Music**:
   - Select a **Spotify link** and choose which part of the track you want to use in your post.
   - The selected audio is then added to the post (either replacing the audio of a video or adding it to an image turned into a short video).

6. **Upload to Instagram**: After reviewing the post with music and caption, hit the **Upload Post** button, and your media will be posted to your Instagram account.

---

## **🔧 Troubleshooting**

If you encounter any issues with downloading from Spotify, ensure that:

- You have a valid Spotify URL.
- Your internet connection is stable (for audio and video downloads).
  
If you have trouble logging into Instagram, make sure that the username and password are correctly set in the `secrets.toml` file.

---

## **📄 License**

This project is licensed under the MIT License — see the LICENSE file for more details.

---

## **💬 Contributing**

Feel free to contribute by opening an issue or submitting a pull request. Suggestions, improvements, or any issues are welcome!

---

Enjoy building your **Instagram posts** with **music, AI-generated captions**, and **personalized mentions**! 🚀💯

---

### **🔗 Related Links**
- [Streamlit Documentation](https://docs.streamlit.io/)
- [Instagram Private API Documentation](https://github.com/instagrambot/instagram-private-api)
- [Gemini AI API Docs](https://gen.ai/docs)

---

### **🎉 Thanks for using this app!**
